parse_dialogue_task:
  description: >
    Parse the following dialogue into structured speaker turns:

    {dialogue}

    You MUST call the dialogue_parser tool exactly once
    and return its output.
  expected_output: >
    A list of objects with keys: speaker and text.
  agent: dialogue_parser_agent


subjective_task:
  description: >
    Extract subjective clinical findings from the parsed dialogue ONLY.
    You are given structured speaker turns.
    You MUST NOT call dialogue_parser.
    You MUST call subjective_extractor exactly once.
    Return ONLY the tool output JSON.
  expected_output: >
    JSON with symptoms, duration, severity, additional_notes.
  agent: subjective_agent
  context:
    - parse_dialogue_task

history_subjective_task:
  description: >
    Extract patient-reported medical, medication, family, and social history.
    Use ONLY patient utterances from parsed dialogue.
    You MUST call history_subjective_extractor exactly once.
    Return ONLY the tool output JSON.
  expected_output: >
    JSON with past_medical_history, medications, family_history,
    social_history, and additional_notes.
  agent: history_subjective_agent
  context:
    - parse_dialogue_task




objective_task:
  description: >
    Extract objective clinical findings ONLY from clinician statements.
    Do NOT infer or add information.
    You MUST call objective_extractor exactly once.
    Return ONLY the tool output JSON.
  expected_output: >
    JSON with vitals, physical_exam, lab_results,
    imaging_results, and additional_notes.
  agent: objective_agent
  context:
    - parse_dialogue_task




assessment_plan_task:
  description: >
    Generate an assessment and plan using ONLY the outputs of previous tasks.
    STRICT RULES:
    - Do NOT add diagnoses.
    - Do NOT recommend tests, referrals, or treatments.
    - Do NOT infer risks or future actions.
    - Every assessment item MUST cite supporting evidence from extracted text.
    - If evidence is insufficient, output "insufficient information" for the plan.
  expected_output: >
    JSON with:
    - assessment: list of objects with fields:
        - problem
        - supporting_evidence (list of exact phrases)
    - plan: either "insufficient information" OR a list of next steps explicitly stated in dialogue.
  agent: assessment_plan_agent
  context:
    - subjective_task
    - objective_task

